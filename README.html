<!DOCTYPE html>
<html>
<head>
    <title>tiny-https-server: Easy tiny https web server middleware.</title>
</head>
<body>

    <h1 id="tiny-https-server-easy-tiny-https-web-server-middleware">tiny-https-server: Easy tiny https web server middleware.</h1>
<p><a href="https://www.npmjs.com/package/tiny-https-server"><img src="https://badgen.net/npm/v/tiny-https-server" alt="npm-version" /></a>
<a href="https://www.npmjs.com/package/tiny-https-server"><img src="https://badgen.net/npm/dt/tiny-https-server" alt="npm-total-downloads" /></a>
<a href="https://www.npmjs.com/package/tiny-https-server"><img src="https://badgen.net/npm/dw/tiny-https-server" alt="npm-week-downloads" /></a></p>
<p>Easy tiny https web server middleware.
Easy to use and configure.
Handle subdomains.
Serving static files.</p>
<h2 id="installing">Installing</h2>
<p><code>npm install tiny-https-server</code></p>
<h2 id="usage-example">Usage example</h2>
<p>app.js</p>
<pre><code class="language-js">require('log-report');

if (require(&quot;try-to-run&quot;)()) {
    // isMainThread
    return;
}

console.time(&quot;Time&quot;);
var options = require(&quot;config-sets&quot;).tiny_https_server;
options.subdomains = { test: &quot;./public/test&quot; };

var server = require(&quot;tiny-https-server&quot;);
//var server = require(&quot;./server.min.js&quot;);

// Console log
server.on(&quot;request&quot;, function (req, res, next) {
    console.timeLog(&quot;Time&quot;, `Url: ${req.headers.host}${req.url}`);
    next();
});
// Test page.
server.on(&quot;request&quot;, function (req, res, next) {
    if (req.url === &quot;/test&quot;) {
        res.writeHead(200, { &quot;Content-Type&quot;: &quot;text/plain&quot; });
        res.write(&quot;Test page.&quot;);
        res.end();
    }
    else
        next();
});
// Simulated crash ...
server.on(&quot;request&quot;, function (req, res, next) {
    if (req.url === &quot;/crash&quot;) {
        throw new Error(&quot;Simulated crash ...&quot;);
    }
    else
        next();
});


var port = options.port === 443 ? &quot;&quot; : &quot;:&quot; + options.port;
var urls = [
    `http://localhost${port}/`,
    `http://test.localhost${port}/`,
    `http://localhost${port}/test`,
    `http://test.localhost${port}/test`,
    `http://localhost${port}/home`
];

// Opens the URLs in the default browser.
while (urls.length) {
    require(&quot;browse-url&quot;)(urls.shift());
}
</code></pre>
<h2 id="config-sets-file">Config-sets file</h2>
<p>config-sets.json</p>
<pre><code class="language-json">{
  &quot;production&quot;: {
    &quot;tiny_https_server&quot;: {
      &quot;domain&quot;: &quot;localhost&quot;,
      &quot;port&quot;: 443,
      &quot;logDir&quot;: &quot;./log/tiny-https-server&quot;,
      &quot;document_root&quot;: &quot;./public/www&quot;,
      &quot;directory_index&quot;: &quot;index.html&quot;,
      &quot;pathToError_404&quot;: &quot;./error_404.html&quot;,
      &quot;pathToPrivkey&quot;: &quot;./cert/localhost-key.pem&quot;,
      &quot;pathToCert&quot;: &quot;./cert/localhost-cert.pem&quot;,
      &quot;subdomains&quot;: {
        &quot;test&quot;: {
          &quot;document_root&quot;: &quot;./public/test&quot;
        }
      },
      &quot;cacheControl&quot;: {
        &quot;fileTypes&quot;: {
          &quot;bmp&quot;: &quot;max-age=2592000&quot;,
          &quot;jpeg&quot;: &quot;max-age=2592000&quot;,
          &quot;jpg&quot;: &quot;max-age=2592000&quot;,
          &quot;png&quot;: &quot;max-age=2592000&quot;,
          &quot;svg&quot;: &quot;max-age=2592000&quot;,
          &quot;pdf&quot;: &quot;max-age=2592000&quot;,
          &quot;html&quot;: &quot;max-age=86400&quot;,
          &quot;css&quot;: &quot;max-age=86400&quot;,
          &quot;js&quot;: &quot;max-age=86400&quot;,
          &quot;webp&quot;: &quot;max-age=2592000&quot;
        }
      },
      &quot;setHeaders&quot;: {
        &quot;default&quot;: {},
        &quot;/&quot;: {
          &quot;X-Frame-Options&quot;: &quot;DENY&quot;
        }
      }
    },
    &quot;log_report&quot;: {
      &quot;logDir&quot;: &quot;./log/log-report&quot;,
      &quot;enabled&quot;: true,
      &quot;clear_on_startup&quot;: false,
      &quot;save_only_uncaughtException&quot;: true
    },
    &quot;browse_url&quot;: {
      &quot;launch_url&quot;: &quot;&quot;,
      &quot;enabled&quot;: false
    },
    &quot;try_to_run&quot;: {
      &quot;retrying&quot;: 10,
      &quot;enabled&quot;: true
    }
  },
  &quot;development&quot;: {
    &quot;tiny_https_server&quot;: {
      &quot;subdomains&quot;: {
        &quot;test&quot;: &quot;./public/test&quot;
      }
    },
    &quot;log_report&quot;: {
      &quot;logDir&quot;: &quot;./log/log-report&quot;,
      &quot;enabled&quot;: true,
      &quot;clear_on_startup&quot;: true,
      &quot;save_only_uncaughtException&quot;: false
    },
    &quot;browse_url&quot;: {
      &quot;launch_url&quot;: &quot;https://localhost/&quot;,
      &quot;enabled&quot;: true
    }
  }
}
</code></pre>
<h2 id="license">License</h2>
<p><a href="LICENSE">MIT</a></p>
<p>Copyright (c) 2021 Manuel Lõhmus <a href="mailto:manuel@hauss.ee">manuel@hauss.ee</a></p>


</body>
</html>